<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<script>
var tutarsizlik = '<bean:write name="p_tutarsizlikParam"/>';<% String tutarsizlikParam = request.getParameter("tutarsizlikParam");if ("emekli".equals(tutarsizlikParam)) { %>	var _YARDIM_SOZCUK = 'genel/uyeEmekli';<% } else if("olum".equals(tutarsizlikParam)){%>	var _YARDIM_SOZCUK = 'genel/uyeOlum';<% } else if("12Aylik".equals(tutarsizlikParam)){%>	var _YARDIM_SOZCUK = 'genel/uyeIssiz';<% } else if("ciftCalismaKaydi".equals(tutarsizlikParam)){%>	var _YARDIM_SOZCUK = 'genel/uyeCalisma';<% } else if("gecersizTckNo".equals(tutarsizlikParam)){%>	var _YARDIM_SOZCUK = 'genel/uyeGecersiz';<%}%>$(document).ready( function () {	<agem:access URL="genel/uyeTutarsizlik/edit">	if ($('.exportlinks').length > 0) {		if (tutarsizlik != 'gecersizTckNo') {			$('<a/>', {     				id: 'kaydet-link',     				href: "javascript:islem()",     				title: 'Tutarsızlığı Düzelt'     			}).html("<span title='Tutarsızlığı Düzelt' class='export-icon save-off' onmouseover=\"Other.changeClass(this, 'save-off', 'save-on')\" onmouseout=\"Other.changeClass(this, 'save-on', 'save-off')\"></span>").prependTo('.exportlinks');					$('.save-off').parent().attr("href", "javascript:islem()");		}	}	</agem:access>});AgemTable.rowDblClick = function(id) {	if (id) {		var d= AgemTable.get(id);		if (d.id) {			AgemWM.window(					{						label: 'İşçi İşlemleri', 						link:"genel/isci/select.do?kisiId=" + d.id + "&kisiIdParam=" +d.id,						width: 800,						height: 600									});		}	}};<agem:access URL="genel/uyeTutarsizlik/edit">function duzelt(ciftDuzeltme) {	Agem.perde(true, null, 'Lütfen bekleyin...');	$.ajax({"url":"genel/uyeTutarsizlik/edit.do",		data:{ tutarsizlikParam: tutarsizlik, ciftKayitTekeIndirParam: ciftDuzeltme, json:1 },		async : false,		timeout: 300000, 		dataType:"json", 		success:function(data){			if (data['@message']){				Agem.error(data['@message'],'x');			}			if (!data['@hata']) {				Other.displayTagYenile();			} 		},		error:function(xhr,err,e){ alert( "Hata: " + err );}});	Agem.perde(false);}</agem:access>function islem() {		if ($("#liste tr.empty").length > 0) {		alert("Listede işlenecek kayıt yok...");		return;	}		if (tutarsizlik != '-1' && tutarsizlik != 'gecersizTckNo') {		<agem:access URL="genel/uyeTutarsizlik/edit">			var text = '';			var h = 130;			var w = 300;			var btn = [{id:'tamam', label:'Tamam', func : function() { duzelt(); return true; }},			               {id:'iptal', label:'İptal', func : function() { return true;}}			               ];			if(tutarsizlik == 'emekli')				text = "Emekli olan üyelerin üyelikleri düşürülecektir. Devam etmek istediğinize emin misiniz?";			else if(tutarsizlik == 'olum')				text = "Hayatını kaybeden üyelerin üyelikleri düşürülecektir. Devam etmek istediğinize emin misiniz?";			else if(tutarsizlik == 'fazlaUyelik')				text = "Birden fazla üyelik kaydı bulunan üyelerin üyelikleri teke düşürülecektir. Devam etmek istediğinize emin misiniz?";			else if(tutarsizlik == '12Aylik')				text = "12 ay boyunca işsiz olan üyelerin üyeliği düşürülecektir. Devam etmek istediğinize emin misiniz?";			else if(tutarsizlik == 'ciftCalismaKaydi') {				text = "Çift çalışma kaydı bulunan üyelerin çalışma kayıtları düzenlenecektir. Devam etmek istediğinize emin misiniz?";				btn = [{id:'evet', label:'Eski Çalışma Kayıtlarını Kapat', func : function() { duzelt(1); return true; }},				               {id:'hayir', label:'Sadece Aynı İşyerindeki Çift Kayıtları Teke indir', func : function() { duzelt(0); return true; }},				               {id:'iptal', label:'İptal', func : function() { return true;}}				               ];				w = 600;			}			else				text = "Tutarsızlığı gidermek istediğinize emin misiniz?";									AgemWM.alertBox({title:'Uyarı', height:h, width:w, message:text, buttons: btn});							</agem:access>	}};	</script>
</arya>
