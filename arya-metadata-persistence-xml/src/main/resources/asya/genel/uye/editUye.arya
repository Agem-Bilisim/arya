<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<window id="addUyeWindow">
		<label visible="false" id="uyeIdlbl" value="Uye Id" />
		<textbox visible="false" type="text" id="uyeId"  value="gxod1fkhas"  placeholder=""  />
		<label visible="false" id="kisiIdlbl" value="Kisi Id" />
		<textbox visible="false" type="text" id="kisiId"  value="srblbu1psu"  placeholder=""  />
		<label visible="false" id="eklemeTarihilbl" value="Ekleme Tarihi" />
		<textbox visible="false" type="text" id="eklemeTarihi"  value="pa015akefs"  placeholder=""  />
		<label visible="false" id="ekleyenlbl" value="Ekleyen" />
		<textbox visible="false" type="text" id="ekleyen"  value="f6e1yjg5tmzem8c74u9amu6y26bopk6defpkji8at3ssog3sqevpo1ix2p8gxy53k0s3oflt202b66r0l33pc4h401lb61sqt3i5kx6daatmojhsgapytbmz4o0ral6yce1qrlo8izpx7vtqhtd9nule592j9mg7bb4flfe8pt3lth5mmeg9jgv80d80pfxpkgqszftyx396pikmoowzgukb1as0gpmg8od8gk0a8x5vcqoprvaqu33afxvnpzi"  maxlength="255"  placeholder=""  />
		<label visible="false" id="sonGunlemeTarihilbl" value="Son Gunleme Tarihi" />
		<textbox visible="false" type="text" id="sonGunlemeTarihi"  value="sujsb5mk87"  placeholder=""  />
		<label visible="false" id="sonGunleyenlbl" value="Son Gunleyen" />
		<textbox visible="false" type="text" id="sonGunleyen"  value="zhkwgy7ub2i1g4c4fms1ii8oerpsn4kutqp89l7r518u1wjmrrr2uumcftjrdhqwo1z445b0wd389r1698peyhoncgp11bqfe8epnoxm7kkrxs3bdb1c0nnls3urawvdhh4ecrqk4k2sd8d7gef1tpcpbuqfp733obo7jxysqahqoujosb0c0ylx59pjie44ztnwpvl0xzq9nb5j7wbt3nnni4524ms26dfqic7du9kd6u34rgxsv8ewfj79w6l"  maxlength="255"  placeholder=""  />
	</window>
	<script>
var uyeKayitDegilMsg = '<span class=\'agem-error\'>Lütfen önce üyeyi kaydediniz...</span>';var _LAST_TCK_NO = "";var LOAD = 0;$(document).ready( function () {	LOAD = 1;	AgemDouble.attachEvents("isci.kisi.tckNo", 0);	$("#cikisAciklama").parent().hide();		if ($("#uyeId").val()) {		girisCalismaYenile();		var json = <bean:write name="genelUyeForm" filter='false'/>;		AgemWM.addQueryString(Agem.json2Param( {uyeId: json.uyeId}));		AgemWM.addSideInfo(			{				id:"uyeInfo",				info: [					{value: json.isci.kisi.ad+" "+json.isci.kisi.soyad, clazz:"pointer", 						onclick: function () {							AgemWM.link('#genelUyeSelect', {url: 'genel/uye/select.do'});						}					},					{label: "T.C.K. No", value: json.isci.kisi.tckNo, clazz: "not-bold"}				],				type: 1			}		);		<agem:access not="true" right="uye.super">			if ($("#girisGecerlilikTarihi").val())				inputlariKapat();			else				onayiKapat();		</agem:access>// 		if ($("#dogrulamaKodu").val()) {// 			$("#basvuruBilgileriLabelLabel").append(" <span style='font-weight: normal'>(Doğrulama Kodu: <span style='font-weight: bold'>"+$("#dogrulamaKodu").val() +"</span>)</span>");// 		}	}	else {		AgemWM.removeSideInfo({type: 1, id: "uyeInfo"});		<agem:access not="true" right="uye.super">			onayiKapat();		</agem:access>		if (!Agem.byId("girisBasvuruTarihi").value)			Agem.byId("girisBasvuruTarihi").value = "<%=AgemUtils.getDate()%>";	}		Agem.byId("girisBasvuruTarihi").onblur = girisCalismaYenile;	Agem.byId("istifaTarihi").onblur    = girisGecerlilikHesapla;	Agem.byId("isci.kisi.tckNo").onblur = tckNoIleKisiGetir;	$("#sendikaId").change(girisGecerlilikHesapla);	<agem:access right="uye.super">		Agem.byId("cikisGecerlilikTarihi").onblur = cikisCalismaYenile;		Agem.byId("girisOnayTarihi").onblur = girisGecerlilikHesapla;		Agem.byId("cikisBasvuruTarihi").onblur = function () {			if (LOAD == 0) {				if (AgemDate.compare(Agem.byId("girisBasvuruTarihi").value, Agem.byId("cikisBasvuruTarihi").value) <= 0 && 					(!Agem.byId("girisGecerlilikTarihi").value || AgemDate.compare(Agem.byId("girisGecerlilikTarihi").value, Agem.byId("cikisBasvuruTarihi").value) > 0))					Agem.byId("cikisGecerlilikHesaplananTarihi").value = Agem.byId("cikisBasvuruTarihi").value;				else					Agem.byId("cikisGecerlilikHesaplananTarihi").value = AgemDate.addDay( AgemDate.addMonth( Agem.byId("cikisBasvuruTarihi").value, 1), -1 );			}			cikisCalismaYenile();		};		cikisDuzenle();		$("#cikisNedeni").change(cikisDuzenle);	</agem:access>	<%if("1".equals(request.getParameter("_YENI_KAYIT"))){%>	var tckNo = Agem.byId("isci.kisi.tckNo").value	if(tckNo)		tckNoIleKisiGetir();	<%}%>	_LAST_TCK_NO = Agem.byId("isci.kisi.tckNo").value;	LOAD = 0;	});var inputlariKapat = function () {	$(":input").attr("disabled", "disabled").addClass("readonly");	$("button").removeAttr("disabled");}var onayiKapat = function () {	$("#onayBilgileriLabel,#girisOnayTarihi,#girisGecerlilikTarihi,#girisYkKararNo,#girisArsivReferansNo").parent().remove();	$("#cikis_div").remove();}var tckNoIleKisiGetir = function () {		var tckNo = Agem.byId("isci.kisi.tckNo").value;	if (tckNo != _LAST_TCK_NO && tckNo) {		Agem.ajax("genel/isci/autocomplete.do", {RxdE12: "1", "kisiParam.tckNoParam": tckNo}, function (r) {			if (r && r.results && r.results.length > 0) {				setKisi(r.results[0]);			}			else {				Agem.setValue({"kisiId" : "", "isci.kisiId": "", "isci.kisi.kisiId": "", "isci.kisi.adSoyad": ""});				girisCalismaYenile();				cikisCalismaYenile();				_LAST_TCK_NO = null;				GIRIS_SON_SORGULANAN_TCKNO = null;				CIKIS_SORGULANA_SON_TCKNO = null;				Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>İşçi bulunamadı.</span>";				if (!AgemValidation.tckNoValidate(tckNo)) {					Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";				}				else{					Agem.byId("tckNoBilgiDiv").innerHTML = "";				}			}		});	}	else if (!tckNo) {		Agem.setValue({"kisiId" : "", "isci.kisiId": "", "isci.kisi.kisiId": "", "isci.kisi.adSoyad": ""});		girisCalismaYenile();		cikisCalismaYenile();		_LAST_TCK_NO = null;		GIRIS_SON_SORGULANAN_TCKNO = null;		CIKIS_SORGULANA_SON_TCKNO = null;		Agem.byId("uyelikBilgiDiv").innerHTML = "";		Agem.byId("tckNoBilgiDiv").innerHTML = "";	}};var setKisi = function (d) {	Agem.setValue(d.kisi, "isci.kisi");	Agem.setValue({kisiId: d.kisiId});	Agem.setValue({"isci.kisiId": d.kisiId});	Agem.setValue({"isci.cinsiyet": d.cinsiyet});	girisCalismaYenile();	cikisCalismaYenile();	if (d.kisi)		_LAST_TCK_NO = d.kisi.tckNo;	else		_LAST_TCK_NO = "";	if (d.uye && d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Tarihi: </span>" + d.uye.girisGecerlilikTarihi;	}	else if (d.uye && !d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi && d.uye.girisBavuruTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Başvuru Tarihi: </span>" + d.uye.girisBasvuruTarihi;	}	else {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>Üyelik bilgisi bulunamadı.</span>";	}	if (d.kisi && !AgemValidation.tckNoValidate(d.kisi.tckNo)) {		Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";	}	else{		Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'></span>";	}};var prepareKisiUrl = function () {	return "genel/isci/autocomplete.do?RxdE12=1";};var prepareAdSoyadParameterName = function () {	return "kisiParam.adSoyadParam";};var prepareTCKimlikNoParameterName = function () {	return "kisiParam.tckNoParam";};var GIRIS_SON_SORGULANAN_TARIH = null;var GIRIS_SON_SORGULANAN_TCKNO = null;var girisCalismaYenile = function(force) {	if (Agem.byId("isci.kisi.tckNo").value && Agem.byId("girisBasvuruTarihi").value && Agem.byId("girisBasvuruTarihi").value != '__/__/____') {		var tarih = Agem.byId("girisBasvuruTarihi").value;		var tckNo = Agem.byId("isci.kisi.tckNo").value;				if (tarih == GIRIS_SON_SORGULANAN_TARIH && tckNo == GIRIS_SON_SORGULANAN_TCKNO && !force)			return;		GIRIS_SON_SORGULANAN_TARIH = tarih;		GIRIS_SON_SORGULANAN_TCKNO = tckNo;		Agem.setValue(			{				"girisCalisanBilgi.girisTarihi": "", 				"girisCalisanBilgi.isyeriId": "", 				"girisCalisanBilgi.isyeriUnvan": "" 			}		);		girisCalismaGetir();			}};var CIKIS_SORGULANA_SON_TARIH = null;var CIKIS_SORGULANA_SON_TCKNO = null;/*-------------------- CIKIS ve ONAY IZNI VAR ---------------------------*/<agem:access right="uye.super">var cikisCalismaYenile = function(force) {	if (Agem.byId("isci.kisi.tckNo").value && (Agem.byId("cikisBasvuruTarihi").value || Agem.byId("cikisGecerlilikTarihi").value)) {		var tarih = Agem.byId("cikisBasvuruTarihi").value ? Agem.byId("cikisBasvuruTarihi").value : Agem.byId("cikisGecerlilikTarihi").value;		var tckNo = Agem.byId("isci.kisi.tckNo").value;		if (tarih == CIKIS_SORGULANA_SON_TARIH && tckNo == CIKIS_SORGULANA_SON_TCKNO && !force)			return;		CIKIS_SORGULANA_SON_TARIH = tarih;		CIKIS_SORGULANA_SON_TCKNO = tckNo;		Agem.setValue(			{				"cikisCalisanBilgi.isyeriId": "", 				"cikisCalisanBilgi.girisTarihi": "",  			  	"cikisCalisanBilgi.unvan": ""			}		);		cikisCalismaGetir(tarih, tckNo);			}	else {		CIKIS_SORGULANA_SON_TARIH = "";		CIKIS_SORGULANA_SON_TCKNO = "";	}	return true;};var cikisDuzenle = function() {		$("#cikisNoterYevmiyeNoLabel").html("Noter Yev.Ref.No");	if ($("#cikisNedeni").val() == "") {		$("#cikisGecerlilikTarihi").parent().hide();		$("#cikisGecerlilikTarihi").val("");		$("#cikisGecerlilikHesaplananTarihi").parent().hide();		$("#cikisGecerlilikHesaplananTarihi").val("");		$("#cikisBasvuruTarihi").parent().hide();		$("#cikisNoterYevmiyeNo").parent().hide();		$("#cikisArsivReferansNo").parent().hide();		$("#cikisBasvuruTarihi").val("");		$("#cikisAciklama").parent().hide();				}	else if ($("#cikisNedeni").val() == "1") {		$("#cikisAciklama").parent().show();			$("#cikisGecerlilikTarihi").parent().hide();		$("#cikisGecerlilikTarihi").val("");		$("#cikisGecerlilikHesaplananTarihi").parent().show();		$("#cikisBasvuruTarihi").parent().show();		$("#cikisNoterYevmiyeNo").parent().show();		$("#cikisArsivReferansNo").parent().show();		if (!$("#cikisBasvuruTarihi").val())			$("#cikisBasvuruTarihi").val("<%=AgemUtils.getDate()%>");		Agem.byId("cikisBasvuruTarihi").onblur();	}	else {		$("#cikisGecerlilikTarihi").parent().show();		$("#cikisGecerlilikHesaplananTarihi").parent().hide();		$("#cikisGecerlilikHesaplananTarihi").val("");		$("#cikisNoterYevmiyeNo").parent().hide();		$("#cikisArsivReferansNo").parent().show();		$("#cikisBasvuruTarihi").parent().hide();				$("#cikisBasvuruTarihi").val("");		$("#cikisAciklama").parent().hide();			if ($("#cikisNedeni").val() == "21") {			$("#cikisGecerlilikTarihiLabel").html("Ölüm Tarihi");		}		else if ($("#cikisNedeni").val() == "22") {			$("#cikisGecerlilikTarihiLabel").html("İşten Ayr.(+12 ay)");		}		else if ($("#cikisNedeni").val() == "23") {			$("#cikisGecerlilikTarihiLabel").html("Emeklilik Tarihi");		}		else if ($("#cikisNedeni").val() == "24") {			$("#cikisGecerlilikTarihiLabel").html("İşten Ayrılma");		} 		else if ($("#cikisNedeni").val() == "3") {			$("#cikisNoterYevmiyeNo").parent().show();			$("#cikisNoterYevmiyeNoLabel").html("YK Karar No");			$("#cikisGecerlilikTarihiLabel").html("İhraç Tarihi");		}	}}var cikisCalismaGit = girisCalismaGit;var setCikisIsyeri = function (d) { };</agem:access>/*-------------------- CIKIS ve ONAY IZNI YOK ---------------------------*/<agem:access not="true" right="uye.super">var cikisCalismaYenile = function(force) {};var cikisDuzenle = function() {}var cikisCalismaGit = function () {};var setCikisIsyeri = function (d) {};</agem:access>var girisGecerlilikHesapla = function () {<agem:access right="uye.super">		if (!Agem.byId("girisOnayTarihi").value) {		Agem.byId("girisGecerlilikTarihi").value = "";	}	if (Agem.byId("girisOnayTarihi").value && Agem.byId("istifaTarihi").value) {		var tar = AgemDate.max(Agem.byId("girisOnayTarihi").value, AgemDate.addMonth(Agem.byId("istifaTarihi").value, 1));		Agem.byId("girisGecerlilikTarihi").value = tar;	}	else if (Agem.byId("girisOnayTarihi").value) {		Agem.byId("girisGecerlilikTarihi").value = Agem.byId("girisOnayTarihi").value;			}</agem:access>};var isciyeGit = function() {	if (Agem.byId("isci.kisiId").value)		AgemWM.window( {link: "genel/isci/select.do?kisiId="+Agem.byId("isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});};var girisCalismaGit = function() {	if (Agem.byId("isci.kisiId").value)		AgemWM.window( {tab:"#genelIsciCalisanList", url: "genel/isci/main.do", q: "kisiId="+Agem.byId("isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});	};var uyeKaydet = function() {		if ($("#cikisNedeni").val() != '1') {		Agem.byId("cikisBasvuruTarihi").value = Agem.byId("cikisGecerlilikTarihi").value;	}		AgemWM.submit('uyeId', 'genelUyeForm');		};function girisCalismaGetir(){	Agem.ajax("genel/calisanBilgi/list.do", 				{pageSize:1, "tarihParam": $("#girisBasvuruTarihi").val() ,"tckNoParam": $("#isci\\.kisi\\.tckNo").val(), json:1}, 			function (d) {				if(d.results && d.results.length > 0) {					var data = d.results[0];					Agem.setValue(						{							"girisCalisanBilgi.girisTarihi": data.girisTarihi, 							"girisCalisanBilgi.isyeriId": data.isyeriId, 							"girisCalisanBilgi.isyeriUnvan": data.isyeriUnvan 						}					);				}				else {					Agem.ajax("genel/calisanBilgi/list.do", 														{pageSize:1, "tarihParam": $("#girisOnayTarihi").val() ,"tckNoParam": $("#isci\\.kisi\\.tckNo").val(), json:1}, 							function (d) {								if(d.results && d.results.length > 0) {									var data = d.results[0];									Agem.setValue(										{											"girisCalisanBilgi.girisTarihi": data.girisTarihi, 											"girisCalisanBilgi.isyeriId": data.isyeriId, 											"girisCalisanBilgi.isyeriUnvan": data.isyeriUnvan 										}									);								}							}						);				}			}		);}function cikisCalismaGetir(tarih, tckNo){		Agem.ajax("genel/calisanBilgi/list.do", 			{pageSize:1, "tarihParam": tarih ,"tckNoParam": tckNo, json:1}, 			function (d) {				if(d.results && d.results.length > 0) {					var data = d.results[0];					Agem.setValue(						{							"cikisCalisanBilgi.girisTarihi": data.girisTarihi, 							"cikisCalisanBilgi.isyeriId": data.isyeriId, 							"cikisCalisanBilgi.isyeriUnvan": data.isyeriUnvan 						}					);				}			}		);}var setIsyeri = function (d) {	if (d.isyeriId) {		AgemWM.addQueryString(Agem.json2Param( {isyeriIdParam: d.id, isyeriId: d.id}));		Agem.byId("girisCalisanBilgi.isyeriId").value = d.isyeriId;	}};	</script>
</arya>
