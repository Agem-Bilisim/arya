<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<script>
var _YARDIM_SOZCUK = 'genel/csvCsgbDusenUye/list';var dusenUyeId = null;$(document).ready( 	function () {		<agem:access URL="genel/csvCsgbDusenUye/edit">			if ($('.exportlinks').length > 0) {					$('<a/>', {     						id: 'kaydet-link',     						href: "javascript:islem()",     						title: 'Tutarsızlığı Düzelt'     					}).html("<span title='Tutarsızlığı Düzelt' class='export-icon save-off' onmouseover=\"Other.changeClass(this, 'save-off', 'save-on')\" onmouseout=\"Other.changeClass(this, 'save-on', 'save-off')\"></span>").prependTo('.exportlinks');							$('.save-off').parent().attr("href", "javascript:islem()");					}		</agem:access>	});var islem = function (){	if ($("#liste tr.empty").length > 0) {		alert("Listede işlenecek kayıt yok...");		return;	}		var json = {json:1};		if (dusenUyeId != null) {		var d = AgemTable.get(dusenUyeId);		json.tckNoParam = d.tckNo;		json.cikisNedeniParam = d.cikisNedeni;	}	else {		json.isyeriIdParam = '<bean:write name="p_isyeriIdParam"/>';		json.isyeriUnvanParam = '<bean:write name="p_isyeriUnvanParam"/>';		json.isyeriSgkKisaNoParam = '<bean:write name="p_isyeriSgkKisaNoParam"/>';		json.tckNoParam = '<bean:write name="p_tckNoParam"/>';		json.subeParam = '<bean:write name="p_subeParam"/>';		json.cikisNedeniParam ='<bean:write name="p_cikisNedeniParam"/>';	}		<agem:access URL="genel/csvCsgbDusenUye/edit">		var text = "ÇSGB kayıtlarından düşen üye bildirimleri sisteme kaydedilecektir. Devam etmek istiyor musunuz?";		if(!confirm(text)){			return false;		}		Agem.perde(true, null, 'Tutarsızlıklar düzeltiliyor, lütfen bekleyin...');		setTimeout(function(){			$.ajax({"url":"genel/csvCsgbDusenUye/edit.do",				data: json,				timeout: 300000, 				dataType:"json", 				success:function(data){					Agem.perde(false);					if (data['@message']){						Other.alert(data['@message'], 'x');						Agem.NO_ALERT = true;						Agem.message("<span class=\"agem-error\">Kayıt güncellemeleri sırasında hata oluştu...</span>");						Agem.NO_ALERT = false;					}					if (!data['@hata']) {						Other.displayTagYenile();					} 				},				error:function(xhr,err,e){ alert( "Kayıtlar düzenlenirken hata oluştu...");}			});		}, 1000);		</agem:access>};AgemTable.rowDblClick = function(id) {	var d = AgemTable.get(id);	if (d.kisiId) {		<agem:access URL="genel/isci/select">			AgemWM.window(					{						label: 'İşçi İşlemleri', 						link:"genel/isci/select.do?kisiId=" + d.kisiId + "&kisiIdParam=" + d.kisiId,						width: 800,						height: 600									});		</agem:access>	}	};AgemTable.rowClick = function(id) {	if (!id) {		id = AgemTable.SELECTED_ID;		if (id == null) {			Agem.error("Lütfen kayıt seçiniz.");			return;		}	}	dusenUyeId = id;};	</script>
</arya>
