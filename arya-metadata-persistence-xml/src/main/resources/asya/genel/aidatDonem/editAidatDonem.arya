<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<script>
$(document).ready(		function () {		});var _IDLER = [];var toplamSayi;function aidatOlustur(p_yeniden, isyeri_id) {	$.ajax({"url":"genel/aidatDonem/edit.do",		data:{ donemYil: $("#donemYil").val(), donemAy: $("#donemAy").val(), yeniden:p_yeniden, id : isyeri_id, json:1 },		async : true,		timeout: 30000, 		dataType:"json", 		success:function(data){			if (p_yeniden == 'true') {				Agem.message('Aidat dönem kayıtları güncelleniyor : ' + (toplamSayi-_IDLER.length) + ' / ' + toplamSayi);			} else {				Agem.message('Aidat dönem kayıtları oluşturuluyor : ' + (toplamSayi-_IDLER.length) + ' / ' + toplamSayi);			}					aidatTopluOlustur(p_yeniden);		},		error:function(xhr,err,e){			alert('Beklenmedik Hata!..');			Agem.perde(false);		}	});}function aidatTopluOlustur(p_yeniden) {	var isyeri_id = _IDLER.pop();	if (isyeri_id) {		aidatOlustur(p_yeniden,isyeri_id);	} else {		if (p_yeniden != 'true') {			$.ajax({"url":"genel/aidatDonem/edit.do",				data:{ donemYil: $("#donemYil").val(), donemAy: $("#donemAy").val(),log:'true', count: toplamSayi ,json:1 },				async : true,				timeout: 30000, 				dataType:"json", 				success:function(data){					alert('Aidat dönem kayıtları başarı ile oluşturuldu','x');				},				error:function(xhr,err,e){					alert('Beklenmedik Hata!..');					Agem.perde(false);				}			});		} else {			alert('Aidat dönem kayıtları başarı ile güncellendi','x');		}		Agem.perde(false);	}}function olustur(p_yeniden) {	if (_IDLER.length == 0 ) {		if (p_yeniden == 'true') {			Agem.error('Döneme ait aidat kaydı bulunamadı...');		} else {			Agem.error('Döneme ait aidatların hepsi zaten oluşturulmuş ya da oluşturulacak hiç kayıt yok...');		}		Agem.perde(false);	} else {		toplamSayi = _IDLER.length;		aidatTopluOlustur(p_yeniden);	}}function donemOlustur() {	var devam = false;	Agem.perde(true, null, 'Dönemler oluşturuluyor. Lütfen bekleyin...');	$.ajax({"url":"genel/aidatDonem/edit.do",		data:{ donemYil: $("#donemYil").val(), donemAy: $("#donemAy").val(), count:"true", json:1 },		async : false,		timeout: 30000, 		dataType:"json", 		success:function(data){ 			_IDLER = data.idler;			devam = true;		},		error:function(xhr,err,e){ 			alert('Beklenmedik Hata!..');			Agem.perde(false);		}});	if (devam) {		setTimeout(olustur('false'),10);	}}function yenidenOlustur() {	var devam = false;	if (confirm('Bu döneme ait aidatlara ilişkin sendika kayıtları güncellenecek. Devam edilsin mi ?')) {		Agem.perde(true, null, 'Dönemler güncelleniyor. Lütfen bekleyin...');		$.ajax({"url":"genel/aidatDonem/edit.do",			data:{ donemYil: $("#donemYil").val(), donemAy: $("#donemAy").val(), count:"true", yeniden:"true",json:1 },			async : false,			timeout: 30000, 			dataType:"json", 			success:function(data){				_IDLER = data.idler;				devam = true;			},			error:function(xhr,err,e){ 				alert('Beklenmedik Hata!..');				Agem.perde(false);			}});				if (devam) {			setTimeout(olustur('true'),10);		}	}}	</script>
</arya>
