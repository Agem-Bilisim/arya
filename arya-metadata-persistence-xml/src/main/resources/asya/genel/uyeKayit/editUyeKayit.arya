<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<window id="addUyekayitWindow">
		<label visible="false" id="uye.uyeIdlbl" value="Uye Id" />
		<textbox visible="false" type="text" id="uye.uyeId"  value="jaih8aybob"  placeholder=""  />
		<label visible="false" id="uye.kisiIdlbl" value="Kisi Id" />
		<textbox visible="false" type="text" id="uye.kisiId"  value="atc1mg0e9q"  placeholder=""  />
		<label visible="false" id="uye.eklemeTarihilbl" value="Ekleme Tarihi" />
		<textbox visible="false" type="text" id="uye.eklemeTarihi"  value="sbpwt5nnjk"  placeholder=""  />
		<label visible="false" id="uye.ekleyenlbl" value="Ekleyen" />
		<textbox visible="false" type="text" id="uye.ekleyen"  value="o3y959fhtq7hxfwmr8j24519xzxtpmwt67xihesovam4qg24y6se60byzqkw7dhteogbjnbvm7q8z94yui14kogsrftxf3g76h6v2tg25pi3mhcx308ba01pmvxobwrtllzefn38s4ijnuzhtkd4wa2iuirdr9jlcq0xu57fztjn0waycynmt2buds39oqwn9ucnfoe52q037ovslyalqx4smmq3a6qdejwk1sqnmsl49t3uatnxuy1f9av7xed"  maxlength="255"  placeholder=""  />
		<label visible="false" id="uye.sonGunlemeTarihilbl" value="Son Gunleme Tarihi" />
		<textbox visible="false" type="text" id="uye.sonGunlemeTarihi"  value="5xwb8h4o8e"  placeholder=""  />
		<label visible="false" id="uye.sonGunleyenlbl" value="Son Gunleyen" />
		<textbox visible="false" type="text" id="uye.sonGunleyen"  value="brp1ky6p1hm6eecixzqcdhss41oup9mt8ii4dbm5rlty1jvi852gceu217zhy3b19gfljseene1e6zjf9mt4u8bky01iwvsqkk9mn4op2wbp20ebp53lkuykz1j031hqzbv5oem46ga38w619ueb62ko494cel1y8z9iaolhc5i6wwk9vhgheydqp44iduyfljwresdehw7g8lnzpkl9fotshzj9hue40wz64zqtb4pi1p9vqcrcvmg1etmft8a"  maxlength="255"  placeholder=""  />
	</window>
	<script>
var _LAST_TCK_NO = "";$(document).ready( function () {		AgemDouble.attachEvents("uye.isci.kisi.tckNo", 0);	Agem.addMaskEvents("isyeri.sgkKisaNo");	Agem.addMaskEvents("uye.girisIsyeri.sgkKisaNo");	Agem.byId("uye.girisBasvuruTarihi").value = "<%=AgemUtils.getDate()%>";	Agem.byId("uye.girisBasvuruTarihi").onblur = girisCalismaYenile;	Agem.byId("uye.istifaTarihi").onblur    = girisGecerlilikHesapla;	$("#uye\.sendikaId").change(girisGecerlilikHesapla);	$("form").attr("ajax", "1");	_LAST_TCK_NO = Agem.byId("uye.isci.kisi.tckNo").value;	Agem.byId("uye.isci.kisi.tckNo").onblur = tckNoIleKisiGetir;	<agem:access not="true" right="uye.super">		onayiKapat();	</agem:access>	<agem:access right="uye.super">		Agem.byId("uye.girisOnayTarihi").onblur = girisGecerlilikHesapla;	</agem:access>	<logic:notEmpty name="p_isyeriId">		Agem.ajax("genel/isyeri/autocomplete.do", {isyeriIdParam: <bean:write name='p_isyeriId'/>}, 			function (r) {				if (r && r.results && r.results.length > 0) {					setIsyeri(r.results[0]);				}			}		);	</logic:notEmpty>});var onayiKapat = function () {	$("#uye\\\.onayBilgileriLabel,#uye\\\.girisOnayTarihi,#uye\\\.girisGecerlilikTarihi,#uye\\\.girisYkKararNo,#uye\\\.girisArsivReferansNo").parent().remove();}var tckNoIleKisiGetir = function () {	var tckNo = Agem.byId("uye.isci.kisi.tckNo").value;	if (tckNo != _LAST_TCK_NO && tckNo) {		Agem.ajax("genel/isci/autocomplete.do", {RxdE12:"1","kisiParam.tckNoParam": tckNo}, function (r) {			if (r && r.results && r.results.length > 0) {				setKisi(r.results[0]);			}			else {				Agem.setValue({"uye.kisiId" : "", "uye.isci.kisiId": "", "uye.isci.kisi.kisiId": "", "uye.isci.kisi.adSoyad": ""});				isyeriAta();				_LAST_TCK_NO = null;				if (!AgemValidation.tckNoValidate(tckNo)) {					Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";				}				else{					Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'></span>";				}				Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>İşçi bulunamadı.</span>";			}		});	}	else if (!tckNo) {		Agem.setValue({"uye.kisiId" : "", "uye.isci.kisiId": "", "uye.isci.kisi.kisiId": "", "uye.isci.kisi.adSoyad": ""});		_LAST_TCK_NO = null;		Agem.byId("uyelikBilgiDiv").innerHTML = "";		Agem.byId("tckNoBilgiDiv").innerHTML = "";	}	_LAST_TCK_NO = tckNo;};var setKisi = function (d) {	Agem.setValue(d.kisi, "uye.isci.kisi");	Agem.setValue({"uye.kisiId": d.kisiId});	Agem.setValue({"uye.isci.kisiId": d.kisiId});	Agem.setValue({"uye.isci.cinsiyet": d.cinsiyet});	girisCalismaYenile();	if (d.kisi && !AgemValidation.tckNoValidate(d.kisi.tckNo)) {		Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";	}	else{		Agem.byId("tckNoBilgiDiv").innerHTML = "";	}			if (d.uye && d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Tarihi: </span>" + d.uye.girisGecerlilikTarihi;	}	else if (d.uye && !d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi && d.uye.girisBavuruTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Başvuru Tarihi: </span>" + d.uye.girisBasvuruTarihi;	}	else {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>Üyelik bilgisi bulunamadı.</span>";	}	};var ek3Yazdir = function () {	if ($('#uye\\.isci\\.kisi\\.kisiId').val())		Other.submitRaporForm(null, 'rapor/ek3/report.do?kisiId='+$('#uye\\.isci\\.kisi\\.kisiId').val());};var prepareKisiUrl = function () {	return "genel/isci/autocomplete.do?RxdE12=1";};var prepareAdSoyadParameterName = function () {	return "kisiParam.adSoyadParam";};var prepareTCKimlikNoParameterName = function () {	return "kisiParam.tckNoParam";};var setGirisIsyeri = function (d) {	if (d.isyeriId != Agem.byId('uye.girisIsyeri.isyeriId').value) {		Agem.byId('uye.girisIseGirisTarihi').value = Agem.byId('uye.girisBasvuruTarihi').value;	}	Agem.setValue(d, "uye.girisIsyeri");};var setIsyeri = function (d) {	Agem.setValue(d, "isyeri");};var GIRIS_SON_SORGULANAN_TARIH = null;var GIRIS_SON_SORGULANAN_TCKNO = null;var girisCalismaYenile = function(force) {	if (Agem.byId("uye.isci.kisi.tckNo").value && Agem.byId("uye.girisBasvuruTarihi").value && Agem.byId("uye.girisBasvuruTarihi").value != '__/__/____') {		var tarih = Agem.byId("uye.girisBasvuruTarihi").value;		var tckNo = Agem.byId("uye.isci.kisi.tckNo").value;		if (tarih == GIRIS_SON_SORGULANAN_TARIH && tckNo == GIRIS_SON_SORGULANAN_TCKNO && force !== 1)			return;		GIRIS_SON_SORGULANAN_TARIH = tarih;		GIRIS_SON_SORGULANAN_TCKNO = tckNo;		Agem.setValue(				{					"uye.girisIsyeri.isyeriId": "", 					"uye.girisIsyeri.sgkKisaNo": "", 					"uye.girisIseGirisTarihi": Agem.byId("uye.girisBasvuruTarihi").value,  				  	"uye.girisIsyeri.unvan": ""				});		Agem.ajax("genel/calisan/autocomplete.do", 			{pageSize:1, "kisiParam.tckNoEsitParam": tckNo, "tarihParam": tarih}, 			function (d) {				if(d.results && d.results.length > 0) {					var data = d.results[0];					Agem.setValue(						{							"uye.girisIsyeri.isyeriId": data.isyeriId, 							"uye.girisIsyeri.sgkKisaNo": data.isyeri.sgkKisaNo, 							"uye.girisIseGirisTarihi": data.girisTarihi,  						  	"uye.girisIsyeri.unvan": data.isyeri.unvan,						  	"uye.mevsimlikDaimi": data.mevsimlikDaimi,						  	"uye.kapsamDisi": data.kapsamDisi						}					);				}				else {					isyeriAta();				}			}		);	}	return true;};AgemTable.rowClick = function (id) {	var r = AgemTable.DATA["d-"+id];	Agem.setValue(r);};var yeniKayit = function () {	Agem.setValue(		{			"uye.uyeId": "",			"uye.girisBasvuruTarihi" : Agem.byId("uye.girisBasvuruTarihi").value ? Agem.byId("uye.girisBasvuruTarihi").value : "<%=AgemUtils.getDate()%>",//			"uye.sendikaId": "",			"uye.istifaTarihi": "",			"uye.girisIsyeri.isyeriId": "",			"uye.girisIsyeri.sgkKisaNo": "",			"uye.girisIsyeri.unvan": "",			"uye.girisIseGirisTarihi": "",			"uye.girisGecerlilikTarihi": "",			"uye.girisArsivReferansNo": "",			"uye.girisNoterYevmiyeNo": "",			"uye.isci.kisiId": "",			"uye.isci.kisi.kisiId": "",			"uye.isci.kisi.tckNo": "",			"uye.isci.kisi.adSoyad": ""		}	);	GIRIS_SON_SORGULANAN_TCKNO = null;	_LAST_TCK_NO = null;	Agem.byId("tckNoBilgiDiv").innerHTML = "";	Agem.byId("uyelikBilgiDiv").innerHTML = "";	};var girisGecerlilikHesapla = function () {	if (!Agem.byId("uye.sendikaId").value) {		Agem.byId("uye.istifaTarihi").value = "";	}	<agem:access right="uye.super">		if (!Agem.byId("uye.girisOnayTarihi").value) {			Agem.byId("uye.girisGecerlilikTarihi").value = "";		}		if (Agem.byId("uye.girisOnayTarihi").value && Agem.byId("uye.istifaTarihi").value) {			var tar = AgemDate.max(Agem.byId("uye.girisOnayTarihi").value, AgemDate.addMonth(Agem.byId("uye.istifaTarihi").value, 1));			Agem.byId("uye.girisGecerlilikTarihi").value = tar;		}		else if (Agem.byId("uye.girisOnayTarihi").value) {			Agem.byId("uye.girisGecerlilikTarihi").value = Agem.byId("uye.girisOnayTarihi").value;				}	</agem:access>}var kaydet = function() {	if (AgemForm.validate(document.forms[0])) {		AgemForm.submit(null, document.forms[0]);	}};var sil = function() {	var x = Agem.byId("uye.uyeId").value;	if (x) {		Agem.ajax("genel/uyeKayit/delete.do", {"uye.uyeId": x, json:1}, function (d) {			$("#liste").removeRow( {id: x});			yeniKayit();		});	}}AgemForm.ajaxReturn = function (d) {	if (d["@hata"]) {		Agem.error(d["@message"]);	}	else {		$("#liste").addRow({			data: [d.uye.isci.kisi.tckNo, d.uye.isci.kisi.adSoyad, d.uye.girisBasvuruTarihi, d.uye.girisOnayTarihi, d.uye.girisGecerlilikTarihi],			clazz: ["right", "", "center", "center", "center"],			json: d,			id: d.uye.uyeId,			prepend: true,			replace: true,			selectRow: true		});		Agem.setValue(d);		if (d.uye.hata && d.uye.hata.indexOf("tckno") > -1) {					}		Agem.message(d["@message"]);	}};var ek3Yukle = function() {	Other.nesneDosyaYukle('uyeEk3',$('#uye\\.uyeId').val(),$('#uye\\.isci\\.kisi\\.adSoyad').val() + ' - Üye Ek3');};var isyerineGit = function () {	if (Agem.byId("isyeri.isyeriId").value)		AgemWM.window( {link: "genel/isyeri/select.do?isyeriId="+Agem.byId("isyeri.isyeriId").value, width: 800, height: 600, label: "İşyeri İşlemleri"});	};var isciyeGit = function() {	if (Agem.byId("uye.isci.kisiId").value)		AgemWM.window( {link: "genel/isci/select.do?kisiId="+Agem.byId("uye.isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});};var girisCalismaGit = function() {	if (Agem.byId("uye.isci.kisiId").value)		AgemWM.window( {tab:"#genelIsciCalisanList", url: "genel/isci/main.do", q: "kisiId="+Agem.byId("uye.isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});	};var isyeriAta = function() {	if (Agem.byId("isyeri.isyeriId").value) {		Agem.setValue(				{					"uye.girisIsyeri.isyeriId": Agem.byId("isyeri.isyeriId").value, 					"uye.girisIsyeri.sgkKisaNo": Agem.byId("isyeri.sgkKisaNo").value, 					"uye.girisIseGirisTarihi": Agem.byId("uye.girisBasvuruTarihi").value,  				  	"uye.girisIsyeri.unvan": Agem.byId("isyeri.unvan").value				}		);	}}	</script>
</arya>
