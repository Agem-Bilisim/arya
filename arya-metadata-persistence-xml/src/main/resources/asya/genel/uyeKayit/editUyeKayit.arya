<?page title="DOCSYS" ?>
<arya xmlns="aryaportal.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="aryaportal.org arya.xsd">
	<window id="addUyekayitWindow">
		<label visible="false" id="uye.uyeIdlbl" value="Uye Id" />
		<textbox visible="false" type="text" id="uye.uyeId"  value="vs8rua1at2"  placeholder=""  />
		<label visible="false" id="uye.kisiIdlbl" value="Kisi Id" />
		<textbox visible="false" type="text" id="uye.kisiId"  value="cfm9xwumm2"  placeholder=""  />
		<label visible="false" id="uye.eklemeTarihilbl" value="Ekleme Tarihi" />
		<textbox visible="false" type="text" id="uye.eklemeTarihi"  value="o4auactkl1"  placeholder=""  />
		<label visible="false" id="uye.ekleyenlbl" value="Ekleyen" />
		<textbox visible="false" type="text" id="uye.ekleyen"  value="m2wu8jmmwzp7ew65ezr3zx69wy9pnvb34wmvetg2tuvdc67vplmfova9xpbxy2r1xjkduoyeifi99kr3ya40lk2bop8p7atfzn38ypuw92vaq7jwd288z5k1jc9kmb5txwue476i13xkfygzb2vu6e6th4ai6oa377px57gpmapcwzckvwsba65s33lkgqu8tax844plpjqgwukngpjh6iumjr1hb0w5riljuf56k6waw84bcdlu71r2v7v107f"  maxlength="255"  placeholder=""  />
		<label visible="false" id="uye.sonGunlemeTarihilbl" value="Son Gunleme Tarihi" />
		<textbox visible="false" type="text" id="uye.sonGunlemeTarihi"  value="y2b1rj843t"  placeholder=""  />
		<label visible="false" id="uye.sonGunleyenlbl" value="Son Gunleyen" />
		<textbox visible="false" type="text" id="uye.sonGunleyen"  value="ow6fgk5mhttc0hupax0zus2oe6zeampf79qenfpnns72ejwr6z7z2fbr50r41jgag40x9vfh0lvh43t0eflyqpzyaer1unk2nwrzlz75pw9d10s1usv9zwvlrckwl11zdpcac2cc46xhyhbs9ffjo5v592x29vm2so53x9n97z4q2wkfhyzaaj2c5paran81d0wt8hc4kl9fmfoc1dur8su4d98uavvulmxync31lqgdes39lidpzfdvv160elr"  maxlength="255"  placeholder=""  />
	</window>
	<script>
var _LAST_TCK_NO = "";$(document).ready( function () {		AgemDouble.attachEvents("uye.isci.kisi.tckNo", 0);	Agem.addMaskEvents("isyeri.sgkKisaNo");	Agem.addMaskEvents("uye.girisIsyeri.sgkKisaNo");	Agem.byId("uye.girisBasvuruTarihi").value = "<%=AgemUtils.getDate()%>";	Agem.byId("uye.girisBasvuruTarihi").onblur = girisCalismaYenile;	Agem.byId("uye.istifaTarihi").onblur    = girisGecerlilikHesapla;	$("#uye\.sendikaId").change(girisGecerlilikHesapla);	$("form").attr("ajax", "1");	_LAST_TCK_NO = Agem.byId("uye.isci.kisi.tckNo").value;	Agem.byId("uye.isci.kisi.tckNo").onblur = tckNoIleKisiGetir;	<agem:access not="true" right="uye.super">		onayiKapat();	</agem:access>	<agem:access right="uye.super">		Agem.byId("uye.girisOnayTarihi").onblur = girisGecerlilikHesapla;	</agem:access>	<logic:notEmpty name="p_isyeriId">		Agem.ajax("genel/isyeri/autocomplete.do", {isyeriIdParam: <bean:write name='p_isyeriId'/>}, 			function (r) {				if (r && r.results && r.results.length > 0) {					setIsyeri(r.results[0]);				}			}		);	</logic:notEmpty>});var onayiKapat = function () {	$("#uye\\\.onayBilgileriLabel,#uye\\\.girisOnayTarihi,#uye\\\.girisGecerlilikTarihi,#uye\\\.girisYkKararNo,#uye\\\.girisArsivReferansNo").parent().remove();}var tckNoIleKisiGetir = function () {	var tckNo = Agem.byId("uye.isci.kisi.tckNo").value;	if (tckNo != _LAST_TCK_NO && tckNo) {		Agem.ajax("genel/isci/autocomplete.do", {RxdE12:"1","kisiParam.tckNoParam": tckNo}, function (r) {			if (r && r.results && r.results.length > 0) {				setKisi(r.results[0]);			}			else {				Agem.setValue({"uye.kisiId" : "", "uye.isci.kisiId": "", "uye.isci.kisi.kisiId": "", "uye.isci.kisi.adSoyad": ""});				isyeriAta();				_LAST_TCK_NO = null;				if (!AgemValidation.tckNoValidate(tckNo)) {					Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";				}				else{					Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'></span>";				}				Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>İşçi bulunamadı.</span>";			}		});	}	else if (!tckNo) {		Agem.setValue({"uye.kisiId" : "", "uye.isci.kisiId": "", "uye.isci.kisi.kisiId": "", "uye.isci.kisi.adSoyad": ""});		_LAST_TCK_NO = null;		Agem.byId("uyelikBilgiDiv").innerHTML = "";		Agem.byId("tckNoBilgiDiv").innerHTML = "";	}	_LAST_TCK_NO = tckNo;};var setKisi = function (d) {	Agem.setValue(d.kisi, "uye.isci.kisi");	Agem.setValue({"uye.kisiId": d.kisiId});	Agem.setValue({"uye.isci.kisiId": d.kisiId});	Agem.setValue({"uye.isci.cinsiyet": d.cinsiyet});	girisCalismaYenile();	if (d.kisi && !AgemValidation.tckNoValidate(d.kisi.tckNo)) {		Agem.byId("tckNoBilgiDiv").innerHTML = "<span class='agem-error bold'>Geçersiz T.C. Kimlik No</span>";	}	else{		Agem.byId("tckNoBilgiDiv").innerHTML = "";	}			if (d.uye && d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Tarihi: </span>" + d.uye.girisGecerlilikTarihi;	}	else if (d.uye && !d.uye.girisGecerlilikTarihi && !d.uye.cikisGecerlilikTarihi && d.uye.girisBavuruTarihi) {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='bold'>Üyelik Başvuru Tarihi: </span>" + d.uye.girisBasvuruTarihi;	}	else {		Agem.byId("uyelikBilgiDiv").innerHTML = "<span class='agem-error bold'>Üyelik bilgisi bulunamadı.</span>";	}	};var ek3Yazdir = function () {	if ($('#uye\\.isci\\.kisi\\.kisiId').val())		Other.submitRaporForm(null, 'rapor/ek3/report.do?kisiId='+$('#uye\\.isci\\.kisi\\.kisiId').val());};var prepareKisiUrl = function () {	return "genel/isci/autocomplete.do?RxdE12=1";};var prepareAdSoyadParameterName = function () {	return "kisiParam.adSoyadParam";};var prepareTCKimlikNoParameterName = function () {	return "kisiParam.tckNoParam";};var setGirisIsyeri = function (d) {	if (d.isyeriId != Agem.byId('uye.girisIsyeri.isyeriId').value) {		Agem.byId('uye.girisIseGirisTarihi').value = Agem.byId('uye.girisBasvuruTarihi').value;	}	Agem.setValue(d, "uye.girisIsyeri");};var setIsyeri = function (d) {	Agem.setValue(d, "isyeri");};var GIRIS_SON_SORGULANAN_TARIH = null;var GIRIS_SON_SORGULANAN_TCKNO = null;var girisCalismaYenile = function(force) {	if (Agem.byId("uye.isci.kisi.tckNo").value && Agem.byId("uye.girisBasvuruTarihi").value && Agem.byId("uye.girisBasvuruTarihi").value != '__/__/____') {		var tarih = Agem.byId("uye.girisBasvuruTarihi").value;		var tckNo = Agem.byId("uye.isci.kisi.tckNo").value;		if (tarih == GIRIS_SON_SORGULANAN_TARIH && tckNo == GIRIS_SON_SORGULANAN_TCKNO && force !== 1)			return;		GIRIS_SON_SORGULANAN_TARIH = tarih;		GIRIS_SON_SORGULANAN_TCKNO = tckNo;		Agem.setValue(				{					"uye.girisIsyeri.isyeriId": "", 					"uye.girisIsyeri.sgkKisaNo": "", 					"uye.girisIseGirisTarihi": Agem.byId("uye.girisBasvuruTarihi").value,  				  	"uye.girisIsyeri.unvan": ""				});		Agem.ajax("genel/calisan/autocomplete.do", 			{pageSize:1, "kisiParam.tckNoEsitParam": tckNo, "tarihParam": tarih}, 			function (d) {				if(d.results && d.results.length > 0) {					var data = d.results[0];					Agem.setValue(						{							"uye.girisIsyeri.isyeriId": data.isyeriId, 							"uye.girisIsyeri.sgkKisaNo": data.isyeri.sgkKisaNo, 							"uye.girisIseGirisTarihi": data.girisTarihi,  						  	"uye.girisIsyeri.unvan": data.isyeri.unvan,						  	"uye.mevsimlikDaimi": data.mevsimlikDaimi,						  	"uye.kapsamDisi": data.kapsamDisi						}					);				}				else {					isyeriAta();				}			}		);	}	return true;};AgemTable.rowClick = function (id) {	var r = AgemTable.DATA["d-"+id];	Agem.setValue(r);};var yeniKayit = function () {	Agem.setValue(		{			"uye.uyeId": "",			"uye.girisBasvuruTarihi" : Agem.byId("uye.girisBasvuruTarihi").value ? Agem.byId("uye.girisBasvuruTarihi").value : "<%=AgemUtils.getDate()%>",//			"uye.sendikaId": "",			"uye.istifaTarihi": "",			"uye.girisIsyeri.isyeriId": "",			"uye.girisIsyeri.sgkKisaNo": "",			"uye.girisIsyeri.unvan": "",			"uye.girisIseGirisTarihi": "",			"uye.girisGecerlilikTarihi": "",			"uye.girisArsivReferansNo": "",			"uye.girisNoterYevmiyeNo": "",			"uye.isci.kisiId": "",			"uye.isci.kisi.kisiId": "",			"uye.isci.kisi.tckNo": "",			"uye.isci.kisi.adSoyad": ""		}	);	GIRIS_SON_SORGULANAN_TCKNO = null;	_LAST_TCK_NO = null;	Agem.byId("tckNoBilgiDiv").innerHTML = "";	Agem.byId("uyelikBilgiDiv").innerHTML = "";	};var girisGecerlilikHesapla = function () {	if (!Agem.byId("uye.sendikaId").value) {		Agem.byId("uye.istifaTarihi").value = "";	}	<agem:access right="uye.super">		if (!Agem.byId("uye.girisOnayTarihi").value) {			Agem.byId("uye.girisGecerlilikTarihi").value = "";		}		if (Agem.byId("uye.girisOnayTarihi").value && Agem.byId("uye.istifaTarihi").value) {			var tar = AgemDate.max(Agem.byId("uye.girisOnayTarihi").value, AgemDate.addMonth(Agem.byId("uye.istifaTarihi").value, 1));			Agem.byId("uye.girisGecerlilikTarihi").value = tar;		}		else if (Agem.byId("uye.girisOnayTarihi").value) {			Agem.byId("uye.girisGecerlilikTarihi").value = Agem.byId("uye.girisOnayTarihi").value;				}	</agem:access>}var kaydet = function() {	if (AgemForm.validate(document.forms[0])) {		AgemForm.submit(null, document.forms[0]);	}};var sil = function() {	var x = Agem.byId("uye.uyeId").value;	if (x) {		Agem.ajax("genel/uyeKayit/delete.do", {"uye.uyeId": x, json:1}, function (d) {			$("#liste").removeRow( {id: x});			yeniKayit();		});	}}AgemForm.ajaxReturn = function (d) {	if (d["@hata"]) {		Agem.error(d["@message"]);	}	else {		$("#liste").addRow({			data: [d.uye.isci.kisi.tckNo, d.uye.isci.kisi.adSoyad, d.uye.girisBasvuruTarihi, d.uye.girisOnayTarihi, d.uye.girisGecerlilikTarihi],			clazz: ["right", "", "center", "center", "center"],			json: d,			id: d.uye.uyeId,			prepend: true,			replace: true,			selectRow: true		});		Agem.setValue(d);		if (d.uye.hata && d.uye.hata.indexOf("tckno") > -1) {					}		Agem.message(d["@message"]);	}};var ek3Yukle = function() {	Other.nesneDosyaYukle('uyeEk3',$('#uye\\.uyeId').val(),$('#uye\\.isci\\.kisi\\.adSoyad').val() + ' - Üye Ek3');};var isyerineGit = function () {	if (Agem.byId("isyeri.isyeriId").value)		AgemWM.window( {link: "genel/isyeri/select.do?isyeriId="+Agem.byId("isyeri.isyeriId").value, width: 800, height: 600, label: "İşyeri İşlemleri"});	};var isciyeGit = function() {	if (Agem.byId("uye.isci.kisiId").value)		AgemWM.window( {link: "genel/isci/select.do?kisiId="+Agem.byId("uye.isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});};var girisCalismaGit = function() {	if (Agem.byId("uye.isci.kisiId").value)		AgemWM.window( {tab:"#genelIsciCalisanList", url: "genel/isci/main.do", q: "kisiId="+Agem.byId("uye.isci.kisiId").value, width: 800, height: 600, label: "İşçi İşlemleri"});	};var isyeriAta = function() {	if (Agem.byId("isyeri.isyeriId").value) {		Agem.setValue(				{					"uye.girisIsyeri.isyeriId": Agem.byId("isyeri.isyeriId").value, 					"uye.girisIsyeri.sgkKisaNo": Agem.byId("isyeri.sgkKisaNo").value, 					"uye.girisIseGirisTarihi": Agem.byId("uye.girisBasvuruTarihi").value,  				  	"uye.girisIsyeri.unvan": Agem.byId("isyeri.unvan").value				}		);	}}	</script>
</arya>
